---
layout: post
title: "linux内核解压缩＜四＞"
subtitle: linux内核解压缩
author: "404"
header-style: text
tags:
  - Linux
  - 内核解压
---

　　在我们进一步研究内核解压缩的时候，我们先来回顾下内核压缩后的内存分布。
1. 内核压缩成gzip之间的过程我们不细致讨论，在这就被压缩成piggy.gzip了
2. 然后我们由piggy.gzip再生成piggy.gzip.o。压缩后的piggy.gzip是以bin文件形式存放在piggy.gzip.o中的。

```c
.section .piggydata,#alloc
      .globl   input_data

input_data:
      .incbin  "arch/arm/boot/compressed/piggy.gzip"
      .globl   input_data_end

input_data_end:
```

　　此时，piggy.gzip.o在链接地址布局是由`arch/arm/boot/compressed/vmlinux.lds`指定的,如下：
```c
.text : {
    _start = .;
    *(.start)
    *(.text)
    *(.text.*)
    *(.fixup)
    *(.gnu.warning)
    *(.rodata)
    *(.rodata.*)
    *(.glue_7)
    *(.glue_7t)
    *(.piggydata)
    . = ALIGN(4);
  }
```
　　在内存图中显示如下：
![avatar](/img/in-post/Linux/201941801001.png)
