---
layout: post
title: "Computer System-结构分析＜三＞"
subtitle: '计算机结构基本分析，内存篇'
author: "404"
header-style: text
tags:
  - Computer System
  - Memory
---

#### 主存简介

主存储器是存储器子系统中的一类，用来存放程序和数据，可以直接与CPU交换信息。在根据MAR中的地址访问某个存储单元时，还需经过地址译码、驱动等电路，才能找到所需访问的单元。读出时，需经过读出放大器，才能将被选中单元的存储字送到MDR。写入时，MDR中的数据也必须经过写入电路才能真正写入到被选中的单元。实际结构如下：
![avatar](/img/in-post/Linux/201922501001.PNG)

现代计算机的主存都由半导体集成电路构成，图中的驱动器、译码器和读写电路均制作在存储芯片中，而MAR和MDR制作在CPU芯片内。存储芯片和CPU芯片可通过总线连接，如图：
![avatar](/img/in-post/Linux/201922501002.PNG)

当要从存储器读出某一信息字时，首先由CPU将该字的地址送到MAR，经地址总线送至主存，然后发出读命令。主存接到读命令后，得知需将该地址单元的内容读出，便完成读操作，将该单元的内容读至数据总线上，至于该信息由MDR送至什么地方，这已不是主存的任务，而是由CPU决定的。若要向主存存入一个信息字时，首先CPU将该字所在主存单元的地址经MAR送到地址总线，并将信息字送入MDR，然后向主存发出写命令，主存接到写命令后，便将数据线上的信息写入到对应地址线指出的主存单元中。

##### 主存中存储单元地址的分配

主存各存储单元的空间位置是由单元地址号来表示的，而地址总线是用来指出存储单元地址号的，根据该地址可读出或写入一个存储字。不同的机器存储字长也不同，为了满足字符处理的需要，常用8位二进制数表示一个字节，因此存储字长都取8的倍数。通常计算机系统即可按字寻址，也可按字节寻址。例如IBM379机的字长为32位，它可按字节寻址，即它的每一个存储字包含4个可独立寻址的字节，其地址分配如下（a）所示。字地址是用该字高位字节的地址来表示，故其字地址是4的整数倍，正好用地址码的末两位来区分同一字的4个字节的位置。但对PDP-11机而言，其字长为16位，字地址是2的正数倍，它用低位字节的地址来表示字地址，如（b）所示：
![avatar](/img/in-post/Linux/201922501003.PNG)

（a）对于24位地址线的主存而言，按字节寻址的范围是16M，按字寻址的范围为4M。
（b）对于24位地址线的主存而言，按字节寻址的范围仍为16M，按字寻址的范围为8M。

#### 半导体存储芯片简介

###### 半导体存储芯片的基本结构

半导体存储芯片采用超大规模集成电路制造工艺，在一个芯片内集成具有记忆功能的存储矩阵、译码驱动电路和读/写电路等，如下图：
![avatar](/img/in-post/Linux/201922501004.PNG)

译码驱动能把地址总线送来的地址信号翻译成对应存储单元的选择信号，该信号在读/写电路的配合下完成对被选中单元的读/写操作。

读/写电路包括读出放大器和写入电路，用来完成读/写操作。

存储芯片通过地址总线、数据总线和控制总线与外部连接。

地址线是单向输入的，其位数与芯片容量有关。

数据线是双向的（有的芯片可用成对出现的数据线分别作为输入或输出），其位数与芯片可读出或写入的数据位数有关。数据线的位数与芯片容量有关。

地址线和数据线的位数共同反映存储芯片的容量。例如，地址线为10根，数据线为4根，则芯片容量为2^10 * 4 = 4K位；

控制线主要有读/写控制线与片选线两种。不同存储芯片的读/写控制线和片选线可以不同。有的芯片的读/写控制线共用1根（如2114），有的分用两根（如6264）。读/写控制线决定芯片进行读/写操作，片选线用来选择存储芯片。由于半导体存储器是由许多芯片组成的，为此需用片选信号来决定哪个芯片被选中。例如，一个64K * 8位的存储器可由32片16*1位的存储芯片组成，如下图，每次读出一个存储字时，只需选中8片
![avatar](/img/in-post/Linux/201922501005.PNG)

##### 半导体存储芯片的译码驱动方式

半导体存储芯片的译码驱动方式有两种：
- 线选法
![avatar](/img/in-post/Linux/201922501006.PNG)
- 重合法
![avatar](/img/in-post/Linux/201922501007.PNG)

线选法例子中是一个16*1字节线选法存储芯片的结构示意图。它的特点是用一根字选择线（字线），直接选中一个存储单元的各位（如一个字节）。这种方式结构简单，但只适于容量不大的存储芯片。如当地址线A3A2A1A0为1111时，则第15根字线被选中，对应于图中最后一行8位代码便可直接读出或写入。

重合法例子中是一个1K*1位重合法结构示意图。显然，只要用64根选择线（X、Y两个方向各32根），便可选择32*32矩阵中的任一位。例如，当地址线全0时，译码输出X0和Y0有效，矩阵中第0行、第0列共同选中的那位即被选中。由于被选单元是由X、Y两个方向的地址决定的，故称为重合法。当欲构成1K*1字节的存储器时，只需用8片如图所示芯片即可。
